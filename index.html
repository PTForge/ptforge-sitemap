<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>PTForge Sitemap</title>
    <script>
      (async () => {
        try {
          // Fetch your static sitemap
          const response = await fetch('sitemap.xml');
          const text = await response.text();

          // Replace all <lastmod> dates with today's date in YYYY-MM-DD format
          const today = new Date().toISOString().split('T')[0];
          const updated = text.replace(/<lastmod>.*?<\/lastmod>/g, `<lastmod>${today}</lastmod>`);

          // Create a temporary blob URL and redirect immediately
          const blob = new Blob([updated], { type: 'application/xml' });
          const url = URL.createObjectURL(blob);
          window.location.replace(url);
        } catch (error) {
          // If anything fails, just load the normal sitemap
          window.location.href = 'sitemap.xml';
        }
      })();
    </script>
  </head>
  <body style="font-family:Inter,Arial,sans-serif; text-align:center; padding:50px;">
    <p>Loading sitemap...</p>
  </body>
</html>
